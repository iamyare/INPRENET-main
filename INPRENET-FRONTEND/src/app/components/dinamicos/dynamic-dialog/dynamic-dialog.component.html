<mat-dialog-actions>
  <button mat-button [mat-dialog-close]="true" color="warn" class="cerrar-button">
    <mat-icon>close</mat-icon>
  </button>
</mat-dialog-actions>

<h1 mat-dialog-title style="font-size: 18px; font-weight: bold">
  {{ dialogTitle }}
</h1>
<mat-dialog-content class="mat-typography">
  <div *ngFor="let log of data.logs">
    <h3 style="font-size: 16px">{{ log.message }}</h3>

    <div *ngIf="isArray(log.detail)">
      <table *ngIf="log.detail.length > 0 && log.type == 'beneficios'" mat-table [dataSource]="log.detail">
        <ng-container matColumnDef="id_beneficio_planilla" *ngIf="displayedColumnsB.includes('id_beneficio_planilla')">
          <th mat-header-cell *matHeaderCellDef>ID Beneficio</th>
          <td mat-cell *matCellDef="let element">
            {{ element.id_beneficio_planilla }}
          </td>
        </ng-container>

        <!-- Nombre Beneficio Column -->
        <ng-container matColumnDef="NOMBRE_BENEFICIO" *ngIf="displayedColumnsB.includes('NOMBRE_BENEFICIO')">
          <th mat-header-cell *matHeaderCellDef>Nombre Beneficio</th>
          <td mat-cell *matCellDef="let element">
            {{ element.NOMBRE_BENEFICIO }}
          </td>
        </ng-container>

        <!-- Periodo Inicio y Finalización Columns -->
        <ng-container matColumnDef="periodoInicio" *ngIf="displayedColumnsB.includes('periodoInicio')">
          <th mat-header-cell *matHeaderCellDef>Periodo Inicio</th>
          <td mat-cell *matCellDef="let element">
            {{ element.periodoInicio }}
          </td>
        </ng-container>

        <ng-container matColumnDef="periodoFinalizacion" *ngIf="displayedColumnsB.includes('periodoFinalizacion')">
          <th mat-header-cell *matHeaderCellDef>Periodo Finalización</th>
          <td mat-cell *matCellDef="let element">
            {{ element.periodoFinalizacion }}
          </td>
        </ng-container>

        <ng-container matColumnDef="MontoAPagar" *ngIf="displayedColumnsB.includes('MontoAPagar')">
          <th mat-header-cell *matHeaderCellDef>Monto</th>
          <td mat-cell *matCellDef="let element" style="text-align: end">
            {{ element.MontoAPagar | currency : "L" : "symbol" : "1.2-2" }}
          </td>
        </ng-container>

        <ng-container matColumnDef="estado" *ngIf="displayedColumnsB.includes('estado')">
          <th mat-header-cell *matHeaderCellDef>Estado</th>
          <td mat-cell *matCellDef="let element">{{ element.estado }}</td>
        </ng-container>

        <!-- Ver Deducciones Column -->
        <ng-container matColumnDef="verDeducciones" *ngIf="displayedColumnsB.includes('verDeducciones')">
          <th mat-header-cell *matHeaderCellDef>Ver Deducciones</th>
          <td mat-cell *matCellDef="let element">
            <button mat-button (click)="getDeduccionesByBeneficio(element)">Ver Deducciones</button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsB"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnsB"></tr>
      </table>


      <table *ngIf="log.detail.length > 0 && log.type == 'deducciones'" mat-table [dataSource]="log.detail">
        <!-- ID Column -->
        <ng-container matColumnDef="id_ded_deduccion" *ngIf="displayedColumnsD.includes('id_ded_deduccion')">
          <th mat-header-cell *matHeaderCellDef>ID Deducción</th>
          <td mat-cell *matCellDef="let element">
            {{ element.id_ded_deduccion }}
          </td>
        </ng-container>

        <ng-container matColumnDef="NOMBRE_INSTITUCION" *ngIf="displayedColumnsD.includes('NOMBRE_INSTITUCION')">
          <th mat-header-cell *matHeaderCellDef>Nombre Institucion</th>
          <td mat-cell *matCellDef="let element">
            {{ element.INSTITUCION }}
          </td>
        </ng-container>
        <ng-container matColumnDef="NOMBRE_DEDUCCION" *ngIf="displayedColumnsD.includes('NOMBRE_DEDUCCION')">
          <th mat-header-cell *matHeaderCellDef>Nombre Deduccion</th>
          <td mat-cell *matCellDef="let element">
            {{ element.NOMBRE_DEDUCCION }}
          </td>
        </ng-container>

        <!-- Monto Total Column -->
        <ng-container matColumnDef="MontoAplicado" *ngIf="displayedColumnsD.includes('MontoAplicado')">
          <th mat-header-cell *matHeaderCellDef>Monto Aplicado</th>
          <td mat-cell *matCellDef="let element" style="text-align: end">
            {{ element.MontoAplicado | currency : "L" : "symbol" : "1.2-2" }}
          </td>
        </ng-container>

        <!-- Estado Aplicación Column -->
        <ng-container matColumnDef="estado_aplicacion" *ngIf="displayedColumnsD.includes('estado_aplicacion')">
          <th mat-header-cell *matHeaderCellDef>Estado Aplicación</th>
          <td mat-cell *matCellDef="let element">
            {{ element.estado_aplicacion }}
          </td>
        </ng-container>

        <!-- Año Column -->
        <ng-container matColumnDef="anio" *ngIf="displayedColumnsD.includes('anio')">
          <th mat-header-cell *matHeaderCellDef>Año</th>
          <td mat-cell *matCellDef="let element">{{ element.anio }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsD"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnsD"></tr>
      </table>
    </div>
  </div>
</mat-dialog-content>