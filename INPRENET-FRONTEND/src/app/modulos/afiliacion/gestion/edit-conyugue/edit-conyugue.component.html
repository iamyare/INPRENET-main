<div class="card">
  <div class="card-header card-header-danger tittle" style="background: #229e92;">
    <h4 class="card-title">Datos de Cónyuge</h4>
    <p class="card-category">Completa la información correspondiente</p>
  </div>

  <div class="card-body">
    <!-- Mostrar botón para agregar cónyuge si no existe -->
    <div *ngIf="!conyugeExisteFlag && mostrarBotonAgregar" style="text-align: center;">
      <button mat-raised-button color="primary" (click)="mostrarFormularioAgregar()">
        Agregar Cónyuge
      </button>
    </div>

    <!-- Formulario para agregar o actualizar el cónyuge -->
    <form *ngIf="conyugeExisteFlag || mostrandoFormularioAgregar" [formGroup]="formGroup" style="margin: 1%;">
      <div formGroupName="conyuge">
        <div class="row">
          <!-- Número de Identificación -->
          <div class="col-lg-4 col-md-12">
            <mat-form-field class="example-full-width inputs" appearance="outline">
              <mat-label>Número de Identificación</mat-label>
              <input matInput type="text" formControlName="n_identificacion">
            </mat-form-field>
          </div>
          <!-- Primer Nombre -->
          <div class="col-lg-4 col-md-12">
            <mat-form-field class="example-full-width inputs" appearance="outline">
              <mat-label>Primer Nombre</mat-label>
              <input matInput type="text" formControlName="primer_nombre">
            </mat-form-field>
          </div>

          <!-- Segundo Nombre -->
          <div class="col-lg-4 col-md-12">
            <mat-form-field class="example-full-width inputs" appearance="outline">
              <mat-label>Segundo Nombre</mat-label>
              <input matInput type="text" formControlName="segundo_nombre">
            </mat-form-field>
          </div>


        </div>

        <div class="row">
          <!-- Tercer Nombre -->
          <div class="col-lg-4 col-md-12">
            <mat-form-field class="example-full-width inputs" appearance="outline">
              <mat-label>Tercer Nombre</mat-label>
              <input matInput type="text" formControlName="tercer_nombre">
            </mat-form-field>
          </div>
          <!-- Primer Apellido -->
          <div class="col-lg-4 col-md-12">
            <mat-form-field class="example-full-width inputs" appearance="outline">
              <mat-label>Primer Apellido</mat-label>
              <input matInput type="text" formControlName="primer_apellido">
            </mat-form-field>
          </div>

          <!-- Segundo Apellido -->
          <div class="col-lg-4 col-md-12">
            <mat-form-field class="example-full-width inputs" appearance="outline">
              <mat-label>Segundo Apellido</mat-label>
              <input matInput type="text" formControlName="segundo_apellido">
            </mat-form-field>
          </div>


        </div>

        <div class="row">
          <!-- Fecha de Nacimiento -->
          <div class="col-lg-3 col-md-12">
            <mat-form-field class="example-full-width inputs" appearance="outline">
              <mat-label>Fecha de Nacimiento</mat-label>
              <input 
              matInput 
              [matDatepicker]="picker" 
              formControlName="fecha_nacimiento" 
              (keydown)="blockManualInput($event)">
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
          </div>

          <!-- Teléfono Celular -->
          <div class="col-lg-3 col-md-12">
            <mat-form-field class="example-full-width inputs" appearance="outline">
              <mat-label>Teléfono Celular</mat-label>
              <input matInput type="text" formControlName="telefono_celular">
            </mat-form-field>
          </div>

          <!-- Teléfono de Casa -->
          <div class="col-lg-3 col-md-12">
            <mat-form-field class="example-full-width inputs" appearance="outline">
              <mat-label>Teléfono de Casa</mat-label>
              <input matInput type="text" formControlName="telefono_domicilio">
            </mat-form-field>
          </div>



          <!-- Teléfono de Trabajo -->
          <div class="col-lg-3 col-md-12">
            <mat-form-field class="example-full-width inputs" appearance="outline">
              <mat-label>Teléfono de Trabajo</mat-label>
              <input matInput type="text" formControlName="telefono_trabajo">
            </mat-form-field>
          </div>
        </div>

        <div class="row">
          <!-- Trabaja -->
          <div class="col-lg-6 col-md-12">
            <mat-radio-group formControlName="trabaja" aria-label="Seleccione si trabaja">
              <label>¿TRABAJA?</label>
              <mat-radio-button value="SI">SÍ</mat-radio-button>
              <mat-radio-button value="NO">NO</mat-radio-button>
            </mat-radio-group>
          </div>

          <!-- Es Afiliado -->
          <div class="col-lg-6 col-md-12">
            <label>¿ES AFILIADO?</label>
            <div class="informative-text">
              {{ formGroup.get('conyuge.es_afiliado')?.value === 'SÍ' ? 'SÍ' : 'NO' }}
            </div>
          </div>
        </div>

        <!-- Botón de agregar o actualizar -->
        <div class="row">
          <div class="col-lg-12" style="text-align: center; margin-top: 20px;">
            <button mat-raised-button color="primary" *ngIf="!conyugeExisteFlag" (click)="agregarConyuge()" [disabled]="formGroup.invalid">
              Agregar Cónyuge
            </button>
            <button mat-raised-button color="primary" *ngIf="conyugeExisteFlag" (click)="actualizarConyuge()" [disabled]="formGroup.invalid">
              Actualizar Cónyuge
            </button>
            <button mat-raised-button color="warn" *ngIf="conyugeExisteFlag" (click)="eliminarConyuge()">
              Eliminar Cónyuge
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
