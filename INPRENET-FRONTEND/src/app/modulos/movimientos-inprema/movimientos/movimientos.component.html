<div>
  <app-buscador
    [searchFunction]="buscarMovimientos.bind(this)"
    (searchResult)="onSearchResult($event)">
  </app-buscador>

  <div>
    <mat-form-field style="width: 100%; margin-bottom: 1%;">
      <mat-label>Buscar en movimientos</mat-label>
      <input matInput [formControl]="searchControl" placeholder="Buscar...">
    </mat-form-field>
  </div>

  <!-- Mostrar spinner mientras la búsqueda está en curso -->
  <div *ngIf="isLoading" style="text-align: center; margin-top: 20px;">
    <mat-spinner></mat-spinner>
    <p>Buscando movimientos...</p>
  </div>

  <div *ngIf="movimientos.data.length > 0 && !isLoading">
    <table mat-table [dataSource]="movimientos" class="mat-elevation-z8">
      <!-- Numero de Cuenta -->
      <ng-container matColumnDef="NUMERO_CUENTA">
        <th mat-header-cell *matHeaderCellDef> Número de Cuenta </th>
        <td mat-cell *matCellDef="let element"> {{ element.NUMERO_CUENTA }} </td>
      </ng-container>

      <!-- Monto -->
      <ng-container matColumnDef="MONTO">
        <th mat-header-cell *matHeaderCellDef> Monto </th>
        <td mat-cell *matCellDef="let element"> {{ element.MONTO }} </td>
      </ng-container>

      <!-- Fecha de Movimiento -->
      <ng-container matColumnDef="FECHA_MOVIMIENTO">
        <th mat-header-cell *matHeaderCellDef> Fecha Movimiento </th>
        <td mat-cell *matCellDef="let element"> {{ element.FECHA_MOVIMIENTO }} </td>
      </ng-container>

      <!-- Tipo de Movimiento -->
      <ng-container matColumnDef="TIPO_MOVIMIENTO">
        <th mat-header-cell *matHeaderCellDef> Tipo Movimiento </th>
        <td mat-cell *matCellDef="let element"> {{ element.TIPO_MOVIMIENTO }} </td>
      </ng-container>

      <!-- Debito o Crédito -->
      <ng-container matColumnDef="DEBITO_CREDITO_B">
        <th mat-header-cell *matHeaderCellDef> Débito/Crédito </th>
        <td mat-cell *matCellDef="let element"> {{ element.DEBITO_CREDITO_B }} </td>
      </ng-container>

      <!-- Tipo de Cuenta -->
      <ng-container matColumnDef="TIPO_CUENTA_DESCRIPCION">
        <th mat-header-cell *matHeaderCellDef> Tipo de Cuenta </th>
        <td mat-cell *matCellDef="let element"> {{ element.TIPO_CUENTA_DESCRIPCION }} </td>
      </ng-container>

      <!-- Encabezado -->
      <tr mat-header-row *matHeaderRowDef="displayedcolumns"></tr>

      <!-- Filas -->
      <tr mat-row *matRowDef="let row; columns: displayedcolumns;"></tr>
    </table>

    <mat-paginator
      [length]="total"
      [pageSize]="10"
      [pageSizeOptions]="[5, 10, 20]"
      (page)="changePage($event)">
    </mat-paginator>
  </div>

  <!-- Si no hay movimientos -->
  <div *ngIf="movimientos.data.length === 0 && !isLoading">
    <p>No se encontraron movimientos.</p>
  </div>
</div>
