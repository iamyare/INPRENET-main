<app-ver-planillas-activas (getElemSeleccionados)="getElemSeleccionados($event)"></app-ver-planillas-activas>

<div class="basic-container">

  <div class=" card " *ngIf="detallePlanilla">
    <div class="card-body" >
      <h4 class="custom-header card-title">Datos Generales De La Planilla {{detallePlanilla?.tipoPlanilla?.nombre_planilla}} (CON Y SIN CUENTA BANCARIA)
      </h4>
      <table>
        <tr style="background-color: #f2f2f2">
          <th>Nombre Planilla</th>
          <td>{{ detallePlanilla?.tipoPlanilla?.nombre_planilla }}</td>
          <th>Fecha Apertura</th>
          <td>{{ convertirFecha(detallePlanilla?.fecha_apertura, true) }}</td>
        </tr>
        <tr>
          <th>Secuencia</th>
          <td>{{ detallePlanilla?.secuencia }}</td>
          <th>Estado</th>
          <td>{{ detallePlanilla?.estado }}</td>
        </tr>
        <tr style="background-color: #f2f2f2">
          <th>Fecha Inicio</th>
          <td>{{ convertirFecha(detallePlanilla?.periodoInicio,false) }}</td>
          <th>Fecha Finalización</th>
          <td>{{ convertirFecha(detallePlanilla?.periodoFinalizacion,false) }}</td>
        </tr>
        <tr>
          <th>Total Beneficios</th>
          <td>L {{ detallePlanilla?.totalBeneficios  | number: '1.2-2':'en-HN'}}</td>
          <th>Deducciones INPREMA</th>
          <td>L {{ detallePlanilla?.deduccionesI  | number: '1.2-2':'en-HN' }}</td>

        </tr>
        <tr style="background-color: #f2f2f2">
          <th>Total Neto</th>
          <td>L {{ detallePlanilla?.totalNeto  | number: '1.2-2':'en-HN'}}</td>
          <th>Deducciones Terceros</th>
          <td>L {{ detallePlanilla?.deduccionesT  | number: '1.2-2':'en-HN'}}</td>
        </tr>
      </table>
    </div>
  </div>

  <div *ngIf="datosTabl.length > 0" class="card" style="background-color: white;margin-bottom: 1%; padding-top: 1%;margin-top: 1%;">
    <h4 class="custom-header card-title" style="text-align: center">
      Personas en la Planilla
    </h4>

    <div style="padding: 1% 1% 1% 1%">
      <app-dynamic-table
        [titulo]="'Datos de personas en planilla'"
        [subtitulo]="'Completa la información correspondiente'"
        [data]="datosTabl"
        [columns]="myColumnsDed"
        [nombreEncabezadoUno]="'Desglose'"
        [mostrarBotonUno]="true"
        [etiquetaBotonUno]="'Ingresos'"
        (accionBotonUno)="manejarAccionUno($event)"
        [nombreEncabezadoDos]="'Detalle Deducciones'"
        [mostrarBotonDos]="true"
        [etiquetaBotonDos]="'Deducciones'"
        (accionBotonDos)="manejarAccionDos($event)"
        (ejecutarFuncionAsincronaEvent)="ejecutarFuncionAsincronaDesdeOtroComponente($event)">
      </app-dynamic-table>

      <div style="background-color: white; margin-bottom: 1%; text-align: center">
        <button mat-raised-button color="primary"
          [disabled]="detallePlanilla.beneficios_cargados == 'NO'"
          (click)="actualizarFechaCierrePlanilla()"
          style="margin: 2% 2%; padding: 10px 20px; color: #ffffff; border-radius: 5px;">
          Cerrar planilla
        </button>
      </div>
      <!-- <div style="text-align: right; margin: 10px;">
        <button mat-raised-button color="accent" (click)="descargarExcelCompleto()">
          Descargar detalles en Excel
        </button>
      </div>
      <div style="text-align: right; margin: 10px;">
        <button mat-raised-button color="accent" (click)="descargarExcelPorPlanilla()">
            Descargar Reporte de Pago Preliminar
        </button>
    </div>
    <div class="spinner-container" *ngIf="isLoading" style="text-align: center; margin: 20px;">
      <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
      <p>Generando reporte, por favor espere...</p>
    </div>
    </div> -->
  </div>



  <!-- || detallePlanilla.deducc_inprema_cargadas == 'NO' || detallePlanilla.deducc_terceros_cargadas == 'NO' -->
</div>
