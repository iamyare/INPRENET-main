<div class="datos-container">
  <h2 style="text-align: center">
    Planilla mes de:
    {{ obtenerNombreMes(dataSource.data[0]) }}
  </h2>

  <div class="botones-container">
    <button mat-raised-button class="boton-estetico" (click)="agregarDocente()">
      Agregar Docente
    </button>
    <button mat-raised-button class="boton-estetico" (click)="generarExcel()">
      Descargar Excel
    </button>
    <button mat-raised-button class="boton-estetico" (click)="generarPDF()">
      Descargar PDF
    </button>
    <!-- <button
        mat-raised-button
        class="boton-estetico"
        (click)="generarActualizarPlanilla()"
      >
        Generar / Actualizar Planilla
      </button> -->
  </div>

  <table mat-table [dataSource]="dataSourceItems1">
    <!-- Número de colegio Column -->
    <ng-container matColumnDef="numeroColegio">
      <th mat-header-cell *matHeaderCellDef>Número de colegio</th>
      <td mat-cell *matCellDef>
        {{ dataSourceItems1[0].ID_CENTRO_TRABAJO }}
      </td>
    </ng-container>

    <!-- Nombre del colegio Column -->
    <ng-container matColumnDef="nombreColegio">
      <th mat-header-cell *matHeaderCellDef>Nombre del colegio</th>
      <td mat-cell *matCellDef>
        {{ dataSourceItems1[0].NOMBRE_CENTRO_TRABAJO }}
      </td>
    </ng-container>

    <!-- Total Sueldo Column -->
    <ng-container matColumnDef="totalSueldo">
      <th mat-header-cell *matHeaderCellDef>Total Sueldo</th>
      <td mat-cell *matCellDef style="text-align: right">
        {{ dataSourceItems1[0].SUELDO | currency : "L" }}
      </td>
    </ng-container>

    <!-- Total Préstamo Column -->
    <ng-container matColumnDef="totalPrestamo">
      <th mat-header-cell *matHeaderCellDef>Total Préstamo</th>
      <td mat-cell *matCellDef style="text-align: right">
        {{ dataSourceItems1[0].PRESTAMOS | currency : "L" }}
      </td>
    </ng-container>

    <!-- Total Aportaciones Column -->
    <ng-container matColumnDef="totalAportaciones">
      <th mat-header-cell *matHeaderCellDef>Total Aportaciones</th>
      <td mat-cell *matCellDef style="text-align: right">
        {{ dataSourceItems1[0].APORTACIONES | currency : "L" }}
      </td>
    </ng-container>

    <!-- Total Cotizaciones Column -->
    <ng-container matColumnDef="totalCotizaciones">
      <th mat-header-cell *matHeaderCellDef>Total Cotizaciones</th>
      <td mat-cell *matCellDef style="text-align: right">
        {{ dataSourceItems1[0].COTIZACIONES | currency : "L" }}
      </td>
    </ng-container>

    <!-- Total Pagar Column -->
    <ng-container matColumnDef="totalPagar">
      <th mat-header-cell *matHeaderCellDef>Total Pagar</th>
      <td mat-cell *matCellDef style="text-align: right">
        {{ dataSourceItems1[0].DEDUCCIONES | currency : "L" }}
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</div>

<div class="linea-separadora"></div>

<mat-tab-group>
  <mat-tab label="EMPLEADOS">
    <div>
      <mat-form-field>
        <mat-label>Filtro</mat-label>
        <input matInput (keyup)="applyFilter($event)" #input />
      </mat-form-field>

      <div>
        <table mat-table [dataSource]="dataSource" matSort>
          <!-- Identidad Column -->
          <ng-container matColumnDef="identidad">
            <th mat-header-cell *matHeaderCellDef>Identidad</th>
            <td mat-cell *matCellDef="let row">{{ row.identidad }}</td>
          </ng-container>

          <!-- Nombre Docente Column -->
          <ng-container matColumnDef="nombreDocente">
            <th mat-header-cell *matHeaderCellDef>Nombre Docente</th>
            <td mat-cell *matCellDef="let row">{{ row.nombreDocente }}</td>
          </ng-container>

          <!-- Sueldo Column -->
          <ng-container matColumnDef="sueldo">
            <th mat-header-cell *matHeaderCellDef>Sueldo</th>
            <td mat-cell *matCellDef="let row" style="text-align: right">
              {{ row.sueldo | currency : "L" }}
            </td>
          </ng-container>

          <!-- Aportaciones Column -->
          <ng-container matColumnDef="aportaciones">
            <th mat-header-cell *matHeaderCellDef>Aportaciones</th>
            <td mat-cell *matCellDef="let row" style="text-align: right">
              {{ row.aportaciones | currency : "L" }}
            </td>
          </ng-container>

          <!-- Cotizaciones Column -->
          <ng-container matColumnDef="cotizaciones">
            <th mat-header-cell *matHeaderCellDef>Cotizaciones</th>
            <td mat-cell *matCellDef="let row" style="text-align: right">
              {{ row.cotizaciones | currency : "L" }}
            </td>
          </ng-container>

          <!-- Prestamos Column -->
          <ng-container matColumnDef="prestamos">
            <th mat-header-cell *matHeaderCellDef>Préstamos</th>
            <td mat-cell *matCellDef="let row" style="text-align: right">
              {{ row.prestamos | currency : "L" }}
            </td>
          </ng-container>

          <!-- Deducciones Column -->
          <ng-container matColumnDef="deducciones">
            <th mat-header-cell *matHeaderCellDef>Deducciones</th>
            <td mat-cell *matCellDef="let row" style="text-align: right">
              {{ row.deducciones | currency : "L" }}
            </td>
          </ng-container>

          <!-- Sueldo Neto Column -->
          <ng-container matColumnDef="sueldoNeto">
            <th mat-header-cell *matHeaderCellDef>Sueldo Neto</th>
            <td mat-cell *matCellDef="let row" style="text-align: right">
              {{ row.sueldoNeto | currency : "L" }}
            </td>
          </ng-container>

          <ng-container matColumnDef="editar">
            <th mat-header-cell *matHeaderCellDef>Editar</th>
            <td mat-cell *matCellDef="let row">
              <button mat-icon-button (click)="editarElemento(row)">
                <mat-icon color="primary">edit</mat-icon>
              </button>
            </td>
          </ng-container>

          <ng-container matColumnDef="eliminar">
            <th mat-header-cell *matHeaderCellDef>Eliminar</th>
            <td mat-cell *matCellDef="let row">
              <button mat-icon-button (click)="eliminarElemento(row)">
                <mat-icon color="warn">delete</mat-icon>
              </button>
            </td>
          </ng-container>

          <!-- No Data Row -->
          <!-- <tr class="mat-row" *matNoDataRow>
                  <td class="mat-cell" colspan="8">
                    No se encuentran datos con el valor: "{{ input.value }}"
                  </td>
                </tr> -->

          <!-- Columnas a mostrar -->
          <tr mat-header-row *matHeaderRowDef="displayedColumns3"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns3"></tr>
        </table>

        <mat-paginator [pageSizeOptions]="[1, 10, 25, 100]" aria-label="Select page of users"></mat-paginator>

      </div>
    </div>
  </mat-tab>
  <mat-tab label="CÁLCULO DE RECARGO">
    <div>
      <mat-form-field appearance="fill">
        <mat-label>Elige una fecha</mat-label>
        <input matInput [matDatepicker]="picker" [formControl]="fecha" (dateChange)="actualizarValores()" />
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>

      <div *ngIf="recargoPlanilla && totalPagarConRecargo">
        <p style="text-align: right">
          Recargo de Planilla: {{ recargoPlanilla | currency : "L" }}
        </p>
        <p style="text-align: right">
          Total a Pagar con Recargo:
          {{ totalPagarConRecargo | currency : "L" }}
        </p>
      </div>
    </div>
  </mat-tab>
</mat-tab-group>